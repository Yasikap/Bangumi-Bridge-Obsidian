# Bangumi Bridge - Obsidian 动画追番管理方案
>**Bangumi Bridge**​ 是一个专为动画爱好者设计的 Obsidian 自动化工具集，能够将您的 Bangumi 追番信息智能导入到个人知识库，并提供实时更新检测功能。

---

# 🌟 项目概述
本项目由[北漠海](https://space.bilibili.com/1065768987) 的开源项目 [Bangumi-to-obsidian-lite](https://github.com/beimohai/Bangumi-to-obsidian-lite) 改版而来，欢迎前往支持原作者！在此对 @北漠海 的开源项目感谢！
## Bangumi Bridge 由两个核心模块组成：

### 📥 **数据导入模块**

- **单动画导入**：通过动画名称搜索 Bangumi 数据库，创建结构化笔记
    
- **批量导入**：一键导入 Bangumi 账号中的"已看"、"想看"、"在看"收藏列表
    

### 🔄 **追番监控模块**​

- **网站更新检测**：实时监控在线观看网站的剧集更新
    
- **本地文件监控**：检测下载文件夹中的视频文件数量变化
    
- **智能看板**：自动将有更新的番剧置顶显示
    

---

# ✨ 核心特性

### 智能数据导入

- 🎯 **精准匹配**：支持中文/日文名称搜索，自动匹配 Bangumi 数据库
    
- 📊 **完整元数据**：自动获取评分、集数、制作公司、放送时间等详细信息
    
- 🏷️ **智能分类**：自动检测改编类型（小说/漫画/游戏/原创/其他）
    
- 🗂️ **自动归档**：按年份/季度自动分类存储笔记
    

### 实时更新检测

- 🌐 **双模式监控**：支持网站更新检测和本地文件夹监控
    
- 🔔 **智能提醒**：有更新的番剧自动置顶，方便追番进度管理
    
- 📈 **进度同步**：自动比较已观看集数与最新剧集数量
    
- 🚀 **一键跳转**：直接打开观看网站或本地下载文件夹
    

### 用户体验优化

- ⏱️ **批量处理**：支持并行检测，大幅提升更新检测速度
    
- 🛡️ **容错机制**：单个条目失败不影响整体流程
    
- 📋 **状态监控**：实时显示导入进度和错误日志
    
- 🎨 **美观界面**：内置完整 CSS 样式，适配 Obsidian 主题
    

---


---

# 🚀 安装与配置

## 完整安装步骤

### 1. 安装必备插件

在 Obsidian 社区插件市场中安装以下插件：

```
# 必需插件：
- QuickAdd
- Dataview
- Templater
```

### 2. 配置脚本文件

**数据导入脚本配置：**

- **单动画导入脚本 (`ACGbangumi.js`)**
    
    ```
    // 主要配置参数
    const BASIC_FOLDER_PATH = "ACG/Anime"; // 修改为你自己的笔记存储路径
    const DELAY_TIME = 2000; // 请求延迟（毫秒）
    const PHYSICAL_FOLDER_MAPPING = {
	    "ACG/Anime": "D:/Videos/Anime",// 修改为你自己的笔记存储路径和本地动画存储路径，注意斜杠方向
	};
    // 功能特性：
    // - 交互式动画搜索和选择
    // - 自动改编类型检测
    // - 用户内容保留机制
    // - 物理文件夹映射支持
    ```
    
- **批量导入脚本 (`BangumiBatchImport.js`)**
    
    ```
    // 批量导入配置
    const BASIC_FOLDER_PATH = "ACG/Anime";// 修改为你自己的笔记存储路径
    ...
    ...
    ...
    const BATCH_CONFIG = {
        userId: "595130", // 您的Bangumi用户ID（需要修改）
        delayBetweenPages: 3000, // 分页延迟
        delayBetweenItems: 2000, // 条目间隔延迟
        skipExistingNotes: true, // 跳过已存在笔记
    };
    
    // 支持的列表类型：
    // - "collect": 已看列表
    // - "wish": 想看列表  
    // - "do": 在看列表
    ```
    

**追番监控脚本配置：**

- **网站更新检测版 (`追番周表-并行检测`)**
    
    ```
    const ROOT_FOLDER = "ACG/Anime";// 修改为你自己的笔记存储路径
    // 特性：并行异步检测，速度快，支持大量番剧同时监控
    ```
    
- **本地文件监控版 (`追番周表-本地`)**
    
    ```
    const ROOT_FOLDER = "ACG/Anime";// 修改为你自己的笔记存储路径
    // 特性：监控本地下载文件夹，统计视频文件数量
    ```
    
- **串行检测版 (`追番周表-串行检测`)**
    
    ```
    const ROOT_FOLDER = "ACG/Anime";// 修改为你自己的笔记存储路径
    // 特性：逐个检测，稳定性好，适合网络环境不稳定情况
    ```
    

### 3.插件配置流程

#### 1. 配置 Dataview 插件

- 在 Obsidian 设置中启用 Dataview 插件
    
- 确保 **JavaScript 查询功能**​ 已启用
    
- 这是追番监控脚本正常运行的必要条件


#### 2. 配置 QuickAdd 插件

1. 在 Obsidian 设置中启用 QuickAdd 插件
    
2. 进入 QuickAdd 插件设置
    
3. 在模板文件夹路径（**Template Folder Path**）设置中，选择您的 **数据导入脚本存放路径**
    

#### 3. 创建 QuickAdd 宏

1. 在 QuickAdd 插件设置中，点击 **Template**，选择**Macro**
    
2. **自定义名称**，点击 **Add Choice**​ 创建新宏


#### 4. 添加用户脚本

1. 在新建的宏中，点击**设置**，点击 **"User Scripts"**
    
2. 从脚本列表中选择 **`ACGbangumi.js`**（单动画导入脚本）
    
3. 点击脚本旁边的**小闪电图标**启用快捷键功能
    
**重复步骤3、4为批量导入功能创建宏**，选择 **`BangumiBatchImport.js`**

#### 5. 添加快捷键或侧边栏图标

- **添加快捷键**：在 Obsidian 快捷键设置中，为 QuickAdd 宏设置快捷键
    
- **侧边栏图标**：在 QuickAdd 设置中启用侧边栏图标，点击即可运行宏
    

#### 6. 文件放置

- 确保 `ACGbangumi.js`和 `BangumiBatchImport.js`已放置在 QuickAdd 脚本目录：
 
- 将追番周表脚本**按需选择**（`追番周表-并行检测.md`、`追番周表-本地.md`、`追番周表-串行检测.md`）保存为 Obsidian 笔记文件位置任意

- 建议将这些追番监控笔记放置在易于访问的位置，如库的根目录或专门的追番文件夹


---
### 验证安装

完成以上步骤后，按以下顺序验证：

1. **测试数据导入**：
    
    - 在 QuickAdd 中运行单动画导入
        
    - 搜索一个动画名称，确认能正常创建笔记
        
    
2. **测试追番监控**：
    
    - 打开任意一个追番周表笔记
        
    - 确认能正常显示追番列表
        
    - 检查更新检测功能是否工作
        
    
3. **检查错误日志（批量导入版）**：
    
    - 查看导入状态和日志文件
        
    - 根据错误信息调整相应配置
        
    

---

# 📖 使用方法

### 数据导入流程

#### 单动画导入

1. **运行脚本**：在 QuickAdd 中执行单动画导入
    
2. **搜索动画**：输入动画名称（中文/日文）
    
3. **选择结果**：从搜索结果中选择正确的条目
    
4. **确认信息**：检查自动识别的改编类型
    
5. **设置状态**：选择观看状态（在看/想看/已看）
    
6. **生成笔记**：自动创建结构化笔记
    

#### 批量导入

1. **选择列表**：选择要导入的收藏列表类型
    
2. **确认操作**：查看导入前预览信息
    
3. **自动执行**：脚本分页获取所有收藏条目
    
4. **进度监控**：实时查看导入状态和日志
    
5. **生成报告**：导入完成后显示统计信息
    

### 追番监控流程

1. **设置监控源**：
    
    - **网站监控**：在笔记中设置 `观看网址`字段
        
    - **本地监控**：在笔记中设置 `下载路径`字段
        
    - **更新观看进度**：在笔记中设置 `已观看集数`字段

2. **查看追番列表**：
    
    - 打开追番周表
        
    - 系统自动检测更新并排序
        
    - 有更新的番剧自动置顶显示
        
    

---
**通过以上完整的安装配置指南，您可以顺利搭建 Bangumi Bridge 系统，开始智能化的动画追番管理体验。**

# ⚡ 性能优化建议

### 导入优化

1. **合理延迟**：根据网络情况调整请求间隔
    
2. **错误重试**：遇到失败条目可选择跳过或重试
    

### 监控优化

1. **选择合适版本**：
    
    - 番剧数量多 → 并行检测版
        
    - 网络不稳定 → 串行检测版
        
    - 本地观看 → 本地监控版
        
    
2. **定期清理**：移出已看完的番剧，修改观看状态为已看，减少检测负担
    

---

# 🐛 故障排除

### 常见问题及解决方案

#### 导入相关问题

**Q: 批量导入部分条目失败**

- ✅ 查看详细错误日志
    
- ✅ 尝试单独导入失败条目
    
- ✅ 检查动画页面是否可正常访问
    

#### 监控相关问题

**Q: 更新检测不准确**

- ✅ 确认观看网址格式正确，确保网址页面能看到所有集数
    
- ✅ 检查本地文件夹路径权限
    
- ✅ 验证已观看集数字段格式
    

**Q: 检测速度过慢**

- ✅ 切换到并行检测版本
    
- ✅ 减少同时监控的番剧数量
    
- ✅ 检查网络连接质量
    




---

# 🚀 更新日志

## v3.1 版： 2026 年 01 月 11 日发布；

---
## 📜 许可证

本项目采用 MIT 许可证 - 查看 [LICENSE](https://tencent.yuanbao/LICENSE)文件了解详情。

---

## 🙏 致谢

- 感谢 [北漠海](https://space.bilibili.com/1065768987) 的开源项目 [Bangumi-to-obsidian-lite](https://github.com/beimohai/Bangumi-to-obsidian-lite) 
    
- 感谢 [月涟_luvian](https://space.bilibili.com/67571043) 的开源项目 [Bangumi-to-obsidian](https://github.com/luvian114/Bangumi-to-obsidian) 
    

---
